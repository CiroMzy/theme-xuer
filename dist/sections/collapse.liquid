<div class="collapse page_width">
  {% if section.settings.title != blank %}
    <h3 class="xuer-h3 xuer-section-title">{{ section.settings.title }}</h3>  
  {% endif %}
  <xuer-collapse class="xuer-collapse">
    {%- for block in section.blocks -%}
      {% case block.type %}
        {% when 'collapse_item' %}
          <div class="xuer-collapse_item {% if section.settings.expand_by_default %} open {% endif %}" xuer-collapse-item>
            <div class="xuer-collapse_item-title" xuer-collapse-title data-collapsible-id="{{ block.id }}">
              <span class="xuer-h5">{{ block.settings.title }}</span>
              <div class="xuer-collapse_item-arrow">
                {% render 'icon', name: 'arrow-up' %}
              </div>
            </div>
            <div class="xuer-collapse_item-main" xuer-collapse-main >
              <div class="xuer-collapse_item-content xuer-animated " xuer-collapse-content >
                {{ block.settings.answer }}
              </div>
            </div>
          </div>
        {% when 'paragraph' %}
          <div class="collapse_paragraph">
            {{ block.settings.content }}
          </div>
      {% endcase %}
    {%- endfor -%}
  </xuer-collapse>
</div>

{% schema %}
{
  "name": "Collapse",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Collapsible title"
    },
    {
      "type": "checkbox",
      "id": "expand_by_default",
      "label": "Expand by default",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "collapse_item",
      "name": "Collapse item",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Question",
          "default": "Question"
        },
        {
          "type": "richtext",
          "id": "answer",
          "label": "Answer",
          "default": "<p>Answer</p>"
        }
      ]
    },
    {
      "type": "paragraph",
      "name": "Paragraph",
      "settings": [
        {
          "type": "richtext",
          "id": "content",
          "label": "Content",
          "default": "<p>Paragraph</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Collapse",
      "settings": {
      },
      "blocks": [
        {
          "type": "collapse_item"
        },
        {
          "type": "collapse_item"
        }
      ]
    }
  ]
}
{% endschema %}
