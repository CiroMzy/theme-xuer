{%- liquid
  if max_width
    assign width = width | at_most: max_width
  endif

  if width
    assign height = width | divided_by: image.aspect_ratio | round
  endif

  assign img_alt = alt | default: image.alt

-%}

<img 
  src="{{ image | image_url }}" 
  alt="{{ img_alt | escape }}"
  width="{{ width }}"
  height="{{ height }}" 
  loading="lazy" 
  class="xuer-image {{ img_class }} {% if cover %}cover{% endif %}"
/>